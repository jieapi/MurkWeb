import{u as N,b as a,c as h,o as l,e as t,s as I,w as e,d as s,f as g,t as f,F as x,h as L,i as d,J as V,K as $,n as W,p as G,r as A,j as U,y as X,l as Y,m as Z,z as C,L as ee,M as te,N as ne,O as se,P as le,D as ie,Q as oe,E as ae}from"./index-BEccWB-n.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const de={class:"sidebar-content"},ue={class:"logo"},ce={class:"logo-icon"},re={class:"logo-text"},me={class:"logo-subtitle"},_e={class:"menu-container"},pe={class:"sidebar-content"},fe={class:"logo-icon"},ve={key:0,class:"logo-text"},be={class:"logo-subtitle"},he={class:"menu-container"},we={__name:"Sidebar",props:{isCollapse:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1},drawerVisible:{type:Boolean,default:!1},isAdmin:{type:Boolean,default:!1},menuItems:{type:Array,default:()=>[]}},emits:["update:drawerVisible","menu-action"],setup(u,{emit:z}){const B=N(),k=u,c=z,M=()=>{c("update:drawerVisible",!1)},S=w=>{const _=(r,v)=>{for(const b of r){if(b.index===v)return b;if(b.children){const y=_(b.children,v);if(y)return y}}return null},p=_(k.menuItems,w);p&&(p.action?c("menu-action",p.action,p):B.push(w)),k.isMobile&&M()};return(w,_)=>{const p=a("Lock"),r=a("el-icon"),v=a("el-menu-item"),b=a("el-sub-menu"),y=a("el-menu"),o=a("el-drawer"),i=a("el-aside");return l(),h(x,null,[t(o,{"model-value":u.drawerVisible,"onUpdate:modelValue":_[0]||(_[0]=n=>w.$emit("update:drawerVisible",n)),direction:"ltr",size:"260px","with-header":!1,class:"mobile-drawer"},{default:e(()=>[s("div",de,[s("div",ue,[s("div",ce,[t(r,{size:"28"},{default:e(()=>[t(p)]),_:1})]),s("div",re,[_[1]||(_[1]=s("h2",null,[g(" Murk"),s("span",{style:{color:"#409EFF"}},"PHP"),g("加密系统 ")],-1)),s("div",me,f(u.isAdmin?"管理后台":"用户中心"),1)])]),s("div",_e,[t(y,{"default-active":w.$route.path,"unique-opened":!0,class:"sidebar-menu",onSelect:S},{default:e(()=>[(l(!0),h(x,null,L(u.menuItems,n=>(l(),h(x,{key:n.index},[n.children?(l(),d(b,{key:1,index:n.index,class:"sub-menu"},{title:e(()=>[t(r,null,{default:e(()=>[(l(),d(V(n.icon)))]),_:2},1024),s("span",null,f(n.title),1)]),default:e(()=>[(l(!0),h(x,null,L(n.children,m=>(l(),d(v,{key:m.index,index:m.index,class:"sub-menu-item"},{default:e(()=>[t(r,null,{default:e(()=>[(l(),d(V(m.icon)))]),_:2},1024),s("span",null,f(m.title),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(l(),d(v,{key:0,index:n.index,class:"menu-item"},{default:e(()=>[t(r,null,{default:e(()=>[(l(),d(V(n.icon)))]),_:2},1024),s("span",null,f(n.title),1)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["default-active"])])])]),_:1},8,["model-value"]),I(t(i,{width:u.isCollapse?"80px":"260px",class:"sidebar"},{default:e(()=>[s("div",pe,[s("div",{class:W(["logo",{collapsed:u.isCollapse}])},[s("div",fe,[t(r,{size:"28"},{default:e(()=>[t(p)]),_:1})]),u.isCollapse?G("",!0):(l(),h("div",ve,[_[2]||(_[2]=s("h2",null,[g(" Murk"),s("span",{style:{color:"#409EFF"}},"PHP"),g("加密系统 ")],-1)),s("div",be,f(u.isAdmin?"管理后台":"用户中心"),1)]))],2),s("div",he,[t(y,{"default-active":w.$route.path,collapse:u.isCollapse,"unique-opened":!0,class:"sidebar-menu",onSelect:S},{default:e(()=>[(l(!0),h(x,null,L(u.menuItems,n=>(l(),h(x,{key:n.index},[n.children?(l(),d(b,{key:1,index:n.index,class:"sub-menu"},{title:e(()=>[t(r,null,{default:e(()=>[(l(),d(V(n.icon)))]),_:2},1024),s("span",null,f(n.title),1)]),default:e(()=>[(l(!0),h(x,null,L(n.children,m=>(l(),d(v,{key:m.index,index:m.index,class:"sub-menu-item"},{default:e(()=>[t(r,null,{default:e(()=>[(l(),d(V(m.icon)))]),_:2},1024),s("span",null,f(m.title),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(l(),d(v,{key:0,index:n.index,class:"menu-item"},{default:e(()=>[t(r,null,{default:e(()=>[(l(),d(V(n.icon)))]),_:2},1024),s("span",null,f(n.title),1)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["default-active","collapse"])])])]),_:1},8,["width"]),[[$,!u.isMobile]])],64)}}},xe=H(we,[["__scopeId","data-v-1dc13499"]]),ge={class:"header-left"},ke={class:"header-right"},ye={class:"switch-backend"},Ce={class:"user-info"},Me={class:"user-details"},Ve={class:"profile-info"},Ie={__name:"AdminLayout",setup(u){const z=X(),B=N(),k=A(!1),c=A(!1),M=A(!1),S=[{index:"/admin/dashboard",title:"仪表盘",icon:"House"},{index:"/admin/users",title:"用户管理",icon:"User",children:[{index:"/admin/users",title:"用户列表",icon:"UserFilled"},{index:"/admin/roles",title:"角色管理",icon:"Avatar"},{index:"/admin/recharge",title:"充值记录",icon:"CreditCard"},{index:"/admin/orders",title:"订单管理",icon:"ShoppingCart"}]},{index:"/admin/scripts",title:"脚本系统",icon:"Document",children:[{index:"/admin/scripts",title:"脚本管理",icon:"Document"},{index:"/admin/tokens",title:"Token管理",icon:"Key"},{index:"/admin/api-logs",title:"加密日志",icon:"List"}]},{index:"/admin/settings",title:"网站管理",icon:"Monitor",children:[{index:"/admin/settings",title:"网站设置",icon:"Setting"},{index:"/admin/announcements",title:"公告管理",icon:"Bell"},{index:"/admin/website-logs",title:"网站日志",icon:"Document"}]}],w=U(()=>{const o=z.path,i=z.meta?.title;if(!i)return[];const n=[];return o.includes("/admin/users")||o.includes("/admin/roles")||o.includes("/admin/recharge")||o.includes("/admin/orders")?(n.push({path:"/admin/users",title:"用户管理"}),i!=="用户管理"&&n.push({path:o,title:i})):o.includes("/admin/scripts")||o.includes("/admin/tokens")||o.includes("/admin/api-logs")?(n.push({path:"/admin/scripts",title:"脚本系统"}),i!=="脚本系统"&&n.push({path:o,title:i})):o.includes("/admin/settings")||o.includes("/admin/website-logs")?(n.push({path:"/admin/settings",title:"网站管理"}),i!=="网站管理"&&n.push({path:o,title:i})):n.push({path:o,title:i}),n}),_=U(()=>{const o=z.matched.filter(i=>i.meta&&i.meta.title);return o.length>0?o[o.length-1].meta.title:"murkphp加密系统"}),p=()=>{c.value=window.innerWidth<768},r=()=>{c.value?M.value=!M.value:k.value=!k.value},v=()=>{B.push("/user")},b=()=>{B.push("/user/profile")},y=()=>{ae.success("退出登录成功"),B.push("/login")};return Y(()=>{p(),window.addEventListener("resize",p)}),Z(()=>{window.removeEventListener("resize",p)}),(o,i)=>{const n=a("el-icon"),m=a("el-button"),E=a("el-breadcrumb-item"),q=a("el-breadcrumb"),K=a("el-tooltip"),F=a("el-avatar"),P=a("el-dropdown-item"),R=a("el-dropdown-menu"),j=a("el-dropdown"),J=a("el-header"),O=a("router-view"),Q=a("el-main"),T=a("el-container");return l(),d(T,{class:"layout-container"},{default:e(()=>[t(xe,{"is-collapse":k.value,"is-mobile":c.value,"drawer-visible":M.value,"onUpdate:drawerVisible":i[0]||(i[0]=D=>M.value=D),"is-admin":!0,"menu-items":S},null,8,["is-collapse","is-mobile","drawer-visible"]),t(T,null,{default:e(()=>[t(J,{class:"header"},{default:e(()=>[s("div",ge,[t(m,{type:"text",onClick:r,class:"collapse-btn"},{default:e(()=>[c.value?(l(),d(n,{key:0},{default:e(()=>[t(C(ee))]),_:1})):(l(),d(n,{key:1},{default:e(()=>[k.value?(l(),d(C(te),{key:0})):(l(),d(C(ne),{key:1}))]),_:1}))]),_:1}),I(t(q,{separator:"/",class:"breadcrumb"},{default:e(()=>[t(E,{to:{path:"/admin/dashboard"}},{default:e(()=>i[1]||(i[1]=[g("首页",-1)])),_:1,__:[1]}),(l(!0),h(x,null,L(w.value,D=>(l(),d(E,{key:D.path},{default:e(()=>[g(f(D.title),1)]),_:2},1024))),128))]),_:1},512),[[$,!c.value]]),I(s("div",{class:"page-title"},f(_.value),513),[[$,c.value]])]),s("div",ke,[s("div",ye,[t(K,{content:"切换到用户后台",placement:"bottom"},{default:e(()=>[t(m,{type:"text",class:"switch-btn",onClick:v},{default:e(()=>[t(n,null,{default:e(()=>[t(C(se))]),_:1}),I(s("span",null,"切换后台",512),[[$,!c.value]])]),_:1})]),_:1})]),t(j,{class:"user-dropdown",trigger:"click"},{dropdown:e(()=>[t(R,{class:"user-dropdown-menu"},{default:e(()=>[t(P,{class:"user-profile-item"},{default:e(()=>[s("div",Ve,[t(F,{size:40,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}),i[3]||(i[3]=s("div",{class:"profile-details"},[s("div",{class:"profile-name"},"管理员"),s("div",{class:"profile-email"},"admin@example.com")],-1))])]),_:1}),t(P,{divided:"",onClick:b},{default:e(()=>[t(n,null,{default:e(()=>[t(C(ie))]),_:1}),i[4]||(i[4]=g(" 个人中心 ",-1))]),_:1,__:[4]}),t(P,{divided:"",onClick:y,class:"logout-item"},{default:e(()=>[t(n,null,{default:e(()=>[t(C(oe))]),_:1}),i[5]||(i[5]=g(" 退出登录 ",-1))]),_:1,__:[5]})]),_:1})]),default:e(()=>[s("div",Ce,[t(F,{size:36,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",class:"user-avatar"}),I(s("div",Me,i[2]||(i[2]=[s("div",{class:"username"},"管理员",-1),s("div",{class:"user-role"},"超级管理员",-1)]),512),[[$,!c.value]]),I(t(n,{class:"dropdown-icon"},{default:e(()=>[t(C(le))]),_:1},512),[[$,!c.value]])])]),_:1})])]),_:1}),t(Q,{class:"main-content"},{default:e(()=>[t(O)]),_:1})]),_:1})]),_:1})}}},Be=H(Ie,[["__scopeId","data-v-24fe86d8"]]);export{Be as default};
