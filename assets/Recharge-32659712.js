import{u as O,r as l,l as W,j as h,b as X,o as u,c as r,d as e,t as c,F as P,h as I,n as y,v as Y,x as Z,e as M,p as b,s as ee,q as C,ag as te,af as o}from"./index-9e8be50b.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";const ae={class:"mobile-recharge"},le={class:"content"},oe={class:"balance-card"},ne={class:"balance-left"},ie={class:"balance-amount"},ce={class:"card amount-card"},de={class:"amount-grid"},ue=["onClick"],re={class:"custom-input"},ve={class:"input-wrapper"},me={class:"agreement"},fe={class:"agreement-check"},pe=["disabled"],_e={class:"payment-sheet-header"},ge={class:"payment-amount-display"},he={class:"payment-order-info"},ye={class:"payment-sheet-content"},be={class:"payment-methods"},ke=["onClick"],Ce={class:"payment-method-left"},xe={class:"payment-method-info"},Ae={class:"payment-method-name"},Se={class:"payment-method-desc"},we={class:"payment-method-check"},Ve={class:"payment-sheet-footer"},Fe=["disabled"],Pe={class:"modal-footer"},Ie={class:"modal-agreement"},Me={class:"modal-buttons"},Ne=["disabled"],Be={class:"modal-content"},Re={class:"confirm-info"},qe={class:"confirm-item"},Te={class:"highlight"},Ue={class:"confirm-item"},je={__name:"Recharge",setup(ze){const N=O(),B=l("128.50"),R=l("测试用户"),m=l(null),n=l(""),v=l("alipay"),i=l(!1),d=l(!1),f=l(!1),_=l(!1),g=l(!1),x=l(!1);W(()=>{localStorage.getItem("rechargeAgreementStatus")==="agreed"&&(i.value=!0)});const q=l([10,20,50,100,200,500]),A=l([{id:"alipay",name:"支付宝",desc:"推荐使用",color:"#1677ff"},{id:"wechat",name:"微信支付",desc:"安全便捷",color:"#07c160"},{id:"qq",name:"QQ钱包",desc:"快速支付",color:"#12b7f5"}]),p=h(()=>n.value&&parseFloat(n.value)>0?parseFloat(n.value).toFixed(2):m.value?m.value.toFixed(2):"0.00"),T=h(()=>{const a=A.value.find(t=>t.id===v.value);return a?a.name:""}),k=h(()=>parseFloat(p.value)>0&&i.value);h(()=>parseFloat(p.value)>0&&v.value&&i.value);const U=a=>{m.value=a,n.value=""},j=()=>{n.value&&(m.value=null)},z=()=>{const a=parseFloat(n.value);a&&a<1?(o.text("最小充值金额为1元"),n.value="1"):a&&a>5e4&&(o.text("最大充值金额为50000元"),n.value="50000")},D=a=>{v.value=a},Q=()=>{i.value?(o.text("已同意充值协议"),localStorage.setItem("rechargeAgreementStatus","agreed")):localStorage.removeItem("rechargeAgreementStatus")},$=()=>{d.value=!1,f.value=!0},S=()=>{f.value=!1,d.value=!1},E=()=>{d.value?(i.value=!0,f.value=!1,o.text("已同意充值协议"),localStorage.setItem("rechargeAgreementStatus","agreed"),d.value=!1):o.text("请先勾选同意协议")},L=()=>{i.value=!1,f.value=!1,o.text("您已拒绝充值协议"),localStorage.removeItem("rechargeAgreementStatus"),d.value=!1},G=()=>{if(!k.value){if(parseFloat(p.value)<=0){o.text("请选择充值金额");return}if(!i.value){o.text("请先同意充值协议");return}}g.value=!0},w=()=>{g.value=!1},H=()=>{if(!v.value){o.text("请选择支付方式");return}g.value=!1,_.value=!0},V=()=>{_.value=!1},J=async()=>{x.value=!0,_.value=!1;try{o.text("正在处理充值..."),await new Promise(a=>setTimeout(a,2e3)),o.text("充值成功！"),setTimeout(()=>{N.push("/user/balance")},1500)}catch{o.text("充值失败，请重试")}finally{x.value=!1}};return(a,t)=>{const F=X("nut-checkbox");return u(),r("div",ae,[e("div",le,[e("div",oe,[e("div",ne,[t[6]||(t[6]=e("div",{class:"balance-label"},"账户余额",-1)),e("div",ie,"¥"+c(B.value),1)])]),e("div",ce,[t[8]||(t[8]=e("div",{class:"card-header"},[e("i",{class:"nutui-iconfont nutui-icon-wallet"}),e("span",null,"选择充值金额")],-1)),e("div",de,[(u(!0),r(P,null,I(q.value,s=>(u(),r("div",{key:s,class:y(["amount-item",{active:m.value===s}]),onClick:K=>U(s)}," ¥"+c(s),11,ue))),128))]),e("div",re,[e("div",ve,[t[7]||(t[7]=e("span",{class:"currency"},"¥",-1)),Y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),type:"number",placeholder:"自定义金额",onInput:j,onBlur:z},null,544),[[Z,n.value]])])])]),e("div",me,[e("div",fe,[M(F,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s),onClick:Q,class:"agreement-checkbox"},null,8,["modelValue"]),t[9]||(t[9]=e("span",null,"我已阅读并同意",-1)),e("span",{class:"agreement-link",onClick:b($,["stop"])},"《充值协议》")])]),e("button",{class:y(["submit-btn",{disabled:!k.value}]),disabled:!k.value,onClick:G}," 立即充值 ",10,pe)]),g.value?(u(),r("div",{key:0,class:"payment-sheet-overlay",onClick:w},[e("div",{class:"payment-sheet",onClick:t[2]||(t[2]=b(()=>{},["stop"]))},[e("div",_e,[e("button",{class:"close-btn",onClick:w},t[10]||(t[10]=[e("i",{class:"nutui-iconfont nutui-icon-close"},null,-1)])),e("div",ge,"¥"+c(p.value),1),e("div",he,"用户名："+c(R.value),1)]),e("div",ye,[t[11]||(t[11]=e("div",{class:"payment-section-title"},"选择支付方式",-1)),e("div",be,[(u(!0),r(P,null,I(A.value,s=>(u(),r("div",{key:s.id,class:y(["payment-method-item",{active:v.value===s.id}]),onClick:K=>D(s.id)},[e("div",Ce,[e("div",{class:"payment-method-icon",style:ee({backgroundColor:s.color})},[e("span",null,c(s.name.charAt(0)),1)],4),e("div",xe,[e("div",Ae,c(s.name),1),e("div",Se,c(s.desc),1)])]),e("div",we,[e("i",{class:y(v.value===s.id?"nutui-iconfont nutui-icon-check-checked":"nutui-iconfont nutui-icon-check-normal")},null,2)])],10,ke))),128))])]),e("div",Ve,[e("button",{class:"payment-confirm-btn",onClick:H,disabled:!v.value}," 确认充值 ",8,Fe)])])])):C("",!0),f.value?(u(),r("div",{key:1,class:"modal-overlay",onClick:S},[e("div",{class:"modal",onClick:t[4]||(t[4]=b(()=>{},["stop"]))},[e("div",{class:"modal-header"},[t[12]||(t[12]=e("h3",null,"充值协议",-1)),e("i",{class:"nutui-iconfont nutui-icon-close",onClick:S})]),t[14]||(t[14]=te('<div class="modal-content" data-v-7f36f163><div class="agreement-section" data-v-7f36f163><h4 data-v-7f36f163>充值须知</h4><p data-v-7f36f163><strong data-v-7f36f163>虚拟商品，不能退款</strong></p><ul data-v-7f36f163><li data-v-7f36f163>充值前请确认您的账户信息无误</li><li data-v-7f36f163>充值金额将实时到账，请耐心等待</li><li data-v-7f36f163>充值过程中请勿关闭页面或重复操作</li><li data-v-7f36f163>如遇充值问题，请及时联系客服处理</li></ul></div><div class="agreement-section" data-v-7f36f163><h4 data-v-7f36f163>服务条款</h4><ul data-v-7f36f163><li data-v-7f36f163>用户充值的余额仅限在本平台使用</li><li data-v-7f36f163>平台有权对异常充值行为进行审核</li><li data-v-7f36f163>用户应遵守平台相关使用规定</li></ul></div></div>',1)),e("div",Pe,[e("div",Ie,[M(F,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=s=>d.value=s),class:"modal-checkbox"},null,8,["modelValue"]),t[13]||(t[13]=e("span",{class:"modal-agreement-text"},"我已阅读并同意",-1))]),e("div",Me,[e("button",{class:"cancel-btn",onClick:L}," 拒绝 "),e("button",{class:"agree-btn",onClick:E,disabled:!d.value}," 同意 ",8,Ne)])])])])):C("",!0),_.value?(u(),r("div",{key:2,class:"modal-overlay",onClick:V},[e("div",{class:"modal payment-modal",onClick:t[5]||(t[5]=b(()=>{},["stop"]))},[t[18]||(t[18]=e("div",{class:"modal-header"},[e("h3",null,"确认充值")],-1)),e("div",Be,[e("div",Re,[e("div",qe,[t[15]||(t[15]=e("span",null,"充值金额：",-1)),e("span",Te,"¥"+c(p.value),1)]),e("div",Ue,[t[16]||(t[16]=e("span",null,"支付方式：",-1)),e("span",null,c(T.value),1)]),t[17]||(t[17]=e("div",{class:"confirm-note"}," 请确认充值信息，点击确认后将跳转到支付页面 ",-1))])]),e("div",{class:"modal-footer"},[e("button",{class:"cancel-btn",onClick:V},"取消"),e("button",{class:"confirm-btn",onClick:J},"确认充值")])])])):C("",!0)])}}},$e=se(je,[["__scopeId","data-v-7f36f163"]]);export{$e as default};
