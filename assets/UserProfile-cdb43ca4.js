import{r as i,a as C,l as S,b as d,o as z,c as j,d as s,e as l,w as a,y as A,D as G,t as v,f as m,E as y}from"./index-9e8be50b.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";const J={class:"profile-page"},K={class:"profile-content"},O={class:"avatar-section"},Q={class:"info-section"},W={class:"info-grid"},X={class:"info-item"},Y={class:"info-value"},Z={class:"info-item"},ee={class:"info-value"},se={class:"info-item"},le={class:"info-value"},ae={class:"info-item"},oe={class:"info-value"},te={class:"security-settings"},re={class:"security-item"},ie={class:"security-item"},ne={class:"security-info"},de={class:"security-desc"},ue={class:"verification-input"},me={__name:"UserProfile",setup(fe){i(!1),i(!1);const _=i(!1),P=i(!1),g=i(!1),E=i(!1),b=i(!1),c=i(0),u=C({id:10001,username:"demo_user",email:"demo@example.com",avatar:"",registerTime:"2024-01-01 10:00:00",lastLoginTime:"2024-01-15 14:30:25",status:"active",balance:"1,234.56",memberLevel:"VIP会员",emailVerified:!0,phoneVerified:!0}),D=i({}),n=C({currentPassword:"",newPassword:"",confirmPassword:""}),t=C({newEmail:"",password:"",newEmailCode:""}),F={currentPassword:[{required:!0,message:"请输入当前密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:(r,e,V)=>{e!==n.newPassword?V(new Error("两次输入密码不一致")):V()},trigger:"blur"}]},I={newEmail:[{required:!0,message:"请输入新邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}],newEmailCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]};i();const x=i(),U=i(),R=()=>{n.currentPassword="",n.newPassword="",n.confirmPassword="",_.value=!0},h=async()=>{try{await x.value.validate(),P.value=!0,await new Promise(r=>setTimeout(r,1e3)),y.success("密码修改成功"),_.value=!1}catch(r){console.error("密码修改失败:",r)}finally{P.value=!1}},L=()=>{t.newEmail="",t.password="",t.newEmailCode="",g.value=!0},N=async()=>{if(!t.newEmail){y.warning("请先输入新邮箱地址");return}try{b.value=!0,await new Promise(e=>setTimeout(e,1e3)),y.success("验证码已发送到新邮箱，请查收"),c.value=60;const r=setInterval(()=>{c.value--,c.value<=0&&clearInterval(r)},1e3)}catch{y.error("发送失败，请重试")}finally{b.value=!1}},B=async()=>{try{await U.value.validate(),E.value=!0,await new Promise(r=>setTimeout(r,1e3)),u.email=t.newEmail,y.success("邮箱修改成功"),g.value=!1}catch(r){console.error("邮箱修改失败:",r)}finally{E.value=!1}};return S(()=>{D.value={...u}}),(r,e)=>{const V=d("el-icon"),$=d("el-avatar"),M=d("el-tag"),k=d("el-card"),f=d("el-button"),p=d("el-input"),w=d("el-form-item"),T=d("el-form"),q=d("el-dialog");return z(),j("div",J,[e[24]||(e[24]=s("h1",{class:"page-title"},"个人资料",-1)),l(k,{class:"profile-card"},{header:a(()=>e[10]||(e[10]=[s("div",{class:"card-header"},[s("h2",{class:"card-title"},"基本信息")],-1)])),default:a(()=>[s("div",K,[s("div",O,[l($,{size:120,class:"user-avatar"},{default:a(()=>[l(V,null,{default:a(()=>[l(A(G))]),_:1})]),_:1})]),s("div",Q,[s("div",W,[s("div",X,[e[11]||(e[11]=s("div",{class:"info-label"},"用户名",-1)),s("div",Y,v(u.username),1)]),s("div",Z,[e[12]||(e[12]=s("div",{class:"info-label"},"用户组",-1)),s("div",ee,[l(M,{type:"warning"},{default:a(()=>[m(v(u.memberLevel),1)]),_:1})])]),s("div",se,[e[13]||(e[13]=s("div",{class:"info-label"},"注册时间",-1)),s("div",le,v(u.registerTime),1)]),s("div",ae,[e[14]||(e[14]=s("div",{class:"info-label"},"最后登录",-1)),s("div",oe,v(u.lastLoginTime),1)])])])])]),_:1}),l(k,{class:"security-card"},{header:a(()=>e[15]||(e[15]=[s("div",{class:"card-header"},[s("h2",{class:"card-title"},"安全设置")],-1)])),default:a(()=>[s("div",te,[s("div",re,[e[17]||(e[17]=s("div",{class:"security-info"},[s("div",{class:"security-title"},"登录密码"),s("div",{class:"security-desc"},"用于登录账户的密码")],-1)),l(f,{type:"primary",plain:"",onClick:R},{default:a(()=>e[16]||(e[16]=[m(" 修改密码 ",-1)])),_:1,__:[16]})]),s("div",ie,[s("div",ne,[e[18]||(e[18]=s("div",{class:"security-title"},"邮箱地址",-1)),s("div",de,"当前邮箱："+v(u.email),1)]),l(f,{type:"primary",plain:"",onClick:L},{default:a(()=>e[19]||(e[19]=[m(" 修改邮箱 ",-1)])),_:1,__:[19]})])])]),_:1}),l(q,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=o=>_.value=o),title:"修改密码",width:"500px"},{footer:a(()=>[l(f,{onClick:e[3]||(e[3]=o=>_.value=!1)},{default:a(()=>e[20]||(e[20]=[m("取消",-1)])),_:1,__:[20]}),l(f,{type:"primary",onClick:h,loading:P.value},{default:a(()=>e[21]||(e[21]=[m(" 确认修改 ",-1)])),_:1,__:[21]},8,["loading"])]),default:a(()=>[l(T,{ref_key:"passwordFormRef",ref:x,model:n,rules:F,"label-width":"100px"},{default:a(()=>[l(w,{label:"当前密码",prop:"currentPassword"},{default:a(()=>[l(p,{modelValue:n.currentPassword,"onUpdate:modelValue":e[0]||(e[0]=o=>n.currentPassword=o),type:"password",placeholder:"请输入当前密码","show-password":""},null,8,["modelValue"])]),_:1}),l(w,{label:"新密码",prop:"newPassword"},{default:a(()=>[l(p,{modelValue:n.newPassword,"onUpdate:modelValue":e[1]||(e[1]=o=>n.newPassword=o),type:"password",placeholder:"请输入新密码","show-password":""},null,8,["modelValue"])]),_:1}),l(w,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[l(p,{modelValue:n.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=o=>n.confirmPassword=o),type:"password",placeholder:"请再次输入新密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(q,{modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=o=>g.value=o),title:"修改邮箱",width:"500px"},{footer:a(()=>[l(f,{onClick:e[8]||(e[8]=o=>g.value=!1)},{default:a(()=>e[22]||(e[22]=[m("取消",-1)])),_:1,__:[22]}),l(f,{type:"primary",onClick:B,loading:E.value},{default:a(()=>e[23]||(e[23]=[m(" 确认修改 ",-1)])),_:1,__:[23]},8,["loading"])]),default:a(()=>[l(T,{ref_key:"emailFormRef",ref:U,model:t,rules:I,"label-width":"120px"},{default:a(()=>[l(w,{label:"当前邮箱"},{default:a(()=>[l(p,{value:u.email,disabled:""},null,8,["value"])]),_:1}),l(w,{label:"新邮箱地址",prop:"newEmail"},{default:a(()=>[l(p,{modelValue:t.newEmail,"onUpdate:modelValue":e[5]||(e[5]=o=>t.newEmail=o),placeholder:"请输入新邮箱地址"},null,8,["modelValue"])]),_:1}),l(w,{label:"登录密码",prop:"password"},{default:a(()=>[l(p,{modelValue:t.password,"onUpdate:modelValue":e[6]||(e[6]=o=>t.password=o),type:"password",placeholder:"请输入登录密码进行验证","show-password":""},null,8,["modelValue"])]),_:1}),l(w,{label:"新邮箱验证码",prop:"newEmailCode"},{default:a(()=>[s("div",ue,[l(p,{modelValue:t.newEmailCode,"onUpdate:modelValue":e[7]||(e[7]=o=>t.newEmailCode=o),placeholder:"请输入验证码",style:{flex:"1","margin-right":"10px"}},null,8,["modelValue"]),l(f,{onClick:N,disabled:!t.newEmail||b.value||c.value>0,loading:b.value},{default:a(()=>[m(v(c.value>0?`${c.value}s后重发`:"发送验证码"),1)]),_:1},8,["disabled","loading"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},ce=H(me,[["__scopeId","data-v-aecf792f"]]);export{ce as default};
