import{_ as pe}from"./_plugin-vue_export-helper-c27b6911.js";import{r as y,a as V,l as me,b as s,K as ie,o as h,c as B,d as c,e,w as t,f as r,v as ce,i as w,t as d,q as S,E as F}from"./index-d670e9de.js";const _e={class:"recharge-records"},fe={class:"card-header"},ge={class:"pagination-container"},ye={key:1},he={class:"dialog-footer"},be={__name:"Recharge",setup(ve){const M=y(!1),O=y(!1),x=y(!1),v=y(!1),R=y(0),Y=y(),n=V({merchantOrderId:"",systemOrderId:"",username:"",amount:0,paymentMethod:"",status:"",createdAt:"",completedAt:"",operator:"",remark:"",qqInfo:"",receiptImage:""}),m=V({username:"",paymentMethod:"",status:"",dateRange:[]}),_=V({currentPage:1,pageSize:20}),k=V({remark:""}),A=y([]),q=[{id:1,merchantOrderId:"M202401150001",systemOrderId:"S202401150001",username:"user001",amount:1e3,paymentMethod:"alipay",status:"paid",createdAt:"2024-01-15 10:30:25",completedAt:"2024-01-15 10:31:05",operator:"system",remark:"支付宝在线充值"},{id:2,merchantOrderId:"M202401150002",systemOrderId:"S202401150002",username:"user002",amount:500,paymentMethod:"wechat",status:"paid",createdAt:"2024-01-15 11:20:15",completedAt:"2024-01-15 11:20:45",operator:"system",remark:"微信支付充值"},{id:3,merchantOrderId:"M202401150003",systemOrderId:"S202401150003",username:"agent001",amount:2e3,paymentMethod:"qq",status:"unpaid",createdAt:"2024-01-15 14:15:30",completedAt:null,operator:"",remark:"QQ支付充值，等待补单",qqInfo:"QQ号: 123456789",receiptImage:"https://example.com/receipt.jpg"},{id:4,merchantOrderId:"M202401140001",systemOrderId:"S202401140001",username:"user003",amount:200,paymentMethod:"wechat",status:"unpaid",createdAt:"2024-01-14 16:45:30",completedAt:null,operator:"",remark:"微信支付充值，未完成支付"},{id:5,merchantOrderId:"M202401140002",systemOrderId:"S202401140002",username:"admin",amount:5e3,paymentMethod:"admin",status:"paid",createdAt:"2024-01-14 09:15:10",completedAt:"2024-01-14 09:15:10",operator:"superadmin",remark:"后台管理员充值"},{id:6,merchantOrderId:"M202401130001",systemOrderId:"S202401130001",username:"user001",amount:300,paymentMethod:"alipay",status:"paid",createdAt:"2024-01-13 13:20:45",completedAt:"2024-01-13 13:21:15",operator:"system",remark:"支付宝在线充值"}],b=()=>{M.value=!0,setTimeout(()=>{A.value=q,R.value=q.length,M.value=!1},500)},E=()=>{_.currentPage=1,b()},$=()=>{Object.assign(m,{username:"",paymentMethod:"",status:"",dateRange:[]}),_.currentPage=1,b()},K=()=>{b()},G=()=>{F.success("充值记录导出成功")},H=o=>{Object.assign(n,o),x.value=!0},J=o=>{Object.assign(n,o),k.remark="",v.value=!0},W=()=>{O.value=!0,setTimeout(()=>{O.value=!1;const o=A.value.find(a=>a.merchantOrderId===n.merchantOrderId);o&&(o.status="paid",o.completedAt=new Date().toLocaleString("zh-CN"),o.operator="admin",o.remark=k.remark||o.remark),F.success("充值申请已补单"),v.value=!1},1e3)},X=o=>{_.pageSize=o,b()},Z=o=>{_.currentPage=o,b()},ee=o=>({admin:"danger",alipay:"primary",wechat:"success",bank:"warning"})[o]||"",z=o=>({admin:"后台充值",alipay:"支付宝",wechat:"微信支付",qq:"QQ支付"})[o]||o,D=o=>({paid:"success",unpaid:"warning"})[o]||"",Q=o=>({paid:"已支付",unpaid:"未支付"})[o]||o;return me(()=>{b()}),(o,a)=>{const P=s("el-input"),i=s("el-form-item"),f=s("el-option"),U=s("el-select"),te=s("el-date-picker"),ae=s("Search"),I=s("el-icon"),g=s("el-button"),T=s("Refresh"),j=s("el-form"),L=s("el-card"),le=s("Download"),u=s("el-table-column"),C=s("el-tag"),oe=s("el-table"),ne=s("el-pagination"),p=s("el-descriptions-item"),re=s("el-image"),se=s("el-descriptions"),N=s("el-dialog"),de=ie("loading");return h(),B("div",_e,[a[19]||(a[19]=c("h1",{class:"page-title"},"充值记录",-1)),e(L,{class:"search-card"},{default:t(()=>[e(j,{model:m,inline:""},{default:t(()=>[e(i,{label:"用户名"},{default:t(()=>[e(P,{modelValue:m.username,"onUpdate:modelValue":a[0]||(a[0]=l=>m.username=l),placeholder:"请输入用户名",style:{width:"200px"},clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"充值方式"},{default:t(()=>[e(U,{modelValue:m.paymentMethod,"onUpdate:modelValue":a[1]||(a[1]=l=>m.paymentMethod=l),placeholder:"全部充值方式",clearable:"",style:{width:"120px"}},{default:t(()=>[e(f,{label:"全部充值方式",value:""}),e(f,{label:"后台充值",value:"admin"}),e(f,{label:"支付宝",value:"alipay"}),e(f,{label:"微信支付",value:"wechat"}),e(f,{label:"QQ支付",value:"qq"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"状态"},{default:t(()=>[e(U,{modelValue:m.status,"onUpdate:modelValue":a[2]||(a[2]=l=>m.status=l),placeholder:"全部状态",clearable:"",style:{width:"120px"}},{default:t(()=>[e(f,{label:"全部状态",value:""}),e(f,{label:"已支付",value:"paid"}),e(f,{label:"未支付",value:"unpaid"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"充值时间"},{default:t(()=>[e(te,{modelValue:m.dateRange,"onUpdate:modelValue":a[3]||(a[3]=l=>m.dateRange=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(i,null,{default:t(()=>[e(g,{type:"primary",onClick:E,loading:M.value},{default:t(()=>[e(I,null,{default:t(()=>[e(ae)]),_:1}),a[10]||(a[10]=r(" 搜索 ",-1))]),_:1,__:[10]},8,["loading"]),e(g,{onClick:$},{default:t(()=>[e(I,null,{default:t(()=>[e(T)]),_:1}),a[11]||(a[11]=r(" 重置 ",-1))]),_:1,__:[11]})]),_:1})]),_:1},8,["model"])]),_:1}),e(L,null,{header:t(()=>[c("div",fe,[a[14]||(a[14]=c("span",null,"充值记录",-1)),c("div",null,[e(g,{type:"primary",size:"small",onClick:K},{default:t(()=>[e(I,null,{default:t(()=>[e(T)]),_:1}),a[12]||(a[12]=r(" 刷新 ",-1))]),_:1,__:[12]}),e(g,{type:"success",size:"small",onClick:G},{default:t(()=>[e(I,null,{default:t(()=>[e(le)]),_:1}),a[13]||(a[13]=r(" 导出数据 ",-1))]),_:1,__:[13]})])])]),default:t(()=>[ce((h(),w(oe,{data:A.value,stripe:"",style:{width:"100%"}},{default:t(()=>[e(u,{prop:"id",label:"ID",width:"80"}),e(u,{prop:"merchantOrderId",label:"商户订单号",width:"160"}),e(u,{prop:"systemOrderId",label:"系统订单号",width:"160"}),e(u,{prop:"username",label:"用户名",width:"120"}),e(u,{prop:"amount",label:"充值金额",width:"120"},{default:t(({row:l})=>[r(d(l.amount)+" 元 ",1)]),_:1}),e(u,{prop:"paymentMethod",label:"充值方式",width:"120"},{default:t(({row:l})=>[e(C,{type:ee(l.paymentMethod)},{default:t(()=>[r(d(z(l.paymentMethod)),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"status",label:"状态",width:"100"},{default:t(({row:l})=>[e(C,{type:D(l.status)},{default:t(()=>[r(d(Q(l.status)),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"createdAt",label:"创建时间",width:"160"}),e(u,{prop:"completedAt",label:"完成时间",width:"160"},{default:t(({row:l})=>[r(d(l.completedAt||"-"),1)]),_:1}),e(u,{prop:"operator",label:"操作人",width:"120"}),e(u,{prop:"remark",label:"备注","min-width":"200"}),e(u,{label:"操作",width:"180",fixed:"right"},{default:t(({row:l})=>[e(g,{type:"text",size:"small",onClick:ue=>H(l),style:{color:"#409eff"}},{default:t(()=>a[15]||(a[15]=[r(" 查看 ",-1)])),_:2,__:[15]},1032,["onClick"]),l.status==="unpaid"?(h(),w(g,{key:0,type:"text",size:"small",onClick:ue=>J(l),style:{color:"#f56c6c"}},{default:t(()=>a[16]||(a[16]=[r(" 补单 ",-1)])),_:2,__:[16]},1032,["onClick"])):S("",!0)]),_:1})]),_:1},8,["data"])),[[de,M.value]]),c("div",ge,[e(ne,{"current-page":_.currentPage,"onUpdate:currentPage":a[4]||(a[4]=l=>_.currentPage=l),"page-size":_.pageSize,"onUpdate:pageSize":a[5]||(a[5]=l=>_.pageSize=l),"page-sizes":[10,20,50,100],total:R.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:X,onCurrentChange:Z},null,8,["current-page","page-size","total"])])]),_:1}),e(N,{modelValue:x.value,"onUpdate:modelValue":a[6]||(a[6]=l=>x.value=l),title:"充值详情",width:"500px"},{default:t(()=>[e(se,{column:1,border:""},{default:t(()=>[e(p,{label:"商户订单号"},{default:t(()=>[r(d(n.merchantOrderId),1)]),_:1}),e(p,{label:"系统订单号"},{default:t(()=>[r(d(n.systemOrderId),1)]),_:1}),e(p,{label:"用户名"},{default:t(()=>[r(d(n.username),1)]),_:1}),e(p,{label:"充值金额"},{default:t(()=>[r(d(n.amount)+" 元",1)]),_:1}),e(p,{label:"充值方式"},{default:t(()=>[r(d(z(n.paymentMethod)),1)]),_:1}),e(p,{label:"状态"},{default:t(()=>[e(C,{type:D(n.status)},{default:t(()=>[r(d(Q(n.status)),1)]),_:1},8,["type"])]),_:1}),e(p,{label:"创建时间"},{default:t(()=>[r(d(n.createdAt),1)]),_:1}),e(p,{label:"完成时间"},{default:t(()=>[r(d(n.completedAt||"-"),1)]),_:1}),e(p,{label:"操作人"},{default:t(()=>[r(d(n.operator),1)]),_:1}),e(p,{label:"备注"},{default:t(()=>[r(d(n.remark||"-"),1)]),_:1}),n.paymentMethod==="qq"?(h(),w(p,{key:0,label:"QQ信息"},{default:t(()=>[r(d(n.qqInfo||"-"),1)]),_:1})):S("",!0),n.paymentMethod==="qq"?(h(),w(p,{key:1,label:"支付凭证"},{default:t(()=>[n.receiptImage?(h(),w(re,{key:0,src:n.receiptImage,style:{"max-width":"100%","max-height":"200px"},"preview-src-list":[n.receiptImage]},null,8,["src","preview-src-list"])):(h(),B("span",ye,"无"))]),_:1})):S("",!0)]),_:1})]),_:1},8,["modelValue"]),e(N,{modelValue:v.value,"onUpdate:modelValue":a[9]||(a[9]=l=>v.value=l),title:"补单充值申请",width:"400px"},{footer:t(()=>[c("span",he,[e(g,{onClick:a[8]||(a[8]=l=>v.value=!1)},{default:t(()=>a[17]||(a[17]=[r("取消",-1)])),_:1,__:[17]}),e(g,{type:"success",onClick:W,loading:O.value},{default:t(()=>a[18]||(a[18]=[r(" 确认补单 ",-1)])),_:1,__:[18]},8,["loading"])])]),default:t(()=>[e(j,{ref_key:"reviewFormRef",ref:Y,model:k,"label-width":"100px"},{default:t(()=>[e(i,{label:"商户订单号"},{default:t(()=>[c("span",null,d(n.merchantOrderId),1)]),_:1}),e(i,{label:"系统订单号"},{default:t(()=>[c("span",null,d(n.systemOrderId),1)]),_:1}),e(i,{label:"用户名"},{default:t(()=>[c("span",null,d(n.username),1)]),_:1}),e(i,{label:"充值金额"},{default:t(()=>[c("span",null,d(n.amount)+" 元",1)]),_:1}),e(i,{label:"备注"},{default:t(()=>[e(P,{modelValue:k.remark,"onUpdate:modelValue":a[7]||(a[7]=l=>k.remark=l),type:"textarea",rows:3,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Me=pe(be,[["__scopeId","data-v-f07b7487"]]);export{Me as default};
