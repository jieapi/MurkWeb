import{u as N,b as a,o as l,c as h,e as t,w as e,d as s,f as g,t as f,F as w,h as z,i as d,J as V,v as I,K as L,n as W,q as G,r as P,j as U,l as X,m as Y,y as C,z as Z,E as ee,L as te,M as ne,N as se,O as le,D as ie,P as oe,Q as ae}from"./index-1093a8fd.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";const de={class:"sidebar-content"},ue={class:"logo"},ce={class:"logo-icon"},re={class:"logo-text"},me={class:"logo-subtitle"},_e={class:"menu-container"},pe={class:"sidebar-content"},fe={class:"logo-icon"},ve={key:0,class:"logo-text"},be={class:"logo-subtitle"},he={class:"menu-container"},xe={__name:"Sidebar",props:{isCollapse:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1},drawerVisible:{type:Boolean,default:!1},isAdmin:{type:Boolean,default:!1},menuItems:{type:Array,default:()=>[]}},emits:["update:drawerVisible","menu-action"],setup(c,{emit:S}){const $=N(),y=c,r=S,M=()=>{r("update:drawerVisible",!1)},B=x=>{const _=(m,v)=>{for(const b of m){if(b.index===v)return b;if(b.children){const k=_(b.children,v);if(k)return k}}return null},p=_(y.menuItems,x);p&&(p.action?r("menu-action",p.action,p):$.push(x)),y.isMobile&&M()};return(x,_)=>{const p=a("Lock"),m=a("el-icon"),v=a("el-menu-item"),b=a("el-sub-menu"),k=a("el-menu"),o=a("el-drawer"),i=a("el-aside");return l(),h(w,null,[t(o,{"model-value":c.drawerVisible,"onUpdate:modelValue":_[0]||(_[0]=n=>x.$emit("update:drawerVisible",n)),direction:"ltr",size:"260px","with-header":!1,class:"mobile-drawer"},{default:e(()=>[s("div",de,[s("div",ue,[s("div",ce,[t(m,{size:"28"},{default:e(()=>[t(p)]),_:1})]),s("div",re,[_[1]||(_[1]=s("h2",null,[g(" Murk"),s("span",{style:{color:"#409EFF"}},"PHP"),g("加密系统 ")],-1)),s("div",me,f(c.isAdmin?"管理后台":"用户中心"),1)])]),s("div",_e,[t(k,{"default-active":x.$route.path,"unique-opened":!0,class:"sidebar-menu",onSelect:B},{default:e(()=>[(l(!0),h(w,null,z(c.menuItems,n=>(l(),h(w,{key:n.index},[n.children?(l(),d(b,{key:1,index:n.index,class:"sub-menu"},{title:e(()=>[t(m,null,{default:e(()=>[(l(),d(V(n.icon)))]),_:2},1024),s("span",null,f(n.title),1)]),default:e(()=>[(l(!0),h(w,null,z(n.children,u=>(l(),d(v,{key:u.index,index:u.index,class:"sub-menu-item"},{default:e(()=>[t(m,null,{default:e(()=>[(l(),d(V(u.icon)))]),_:2},1024),s("span",null,f(u.title),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(l(),d(v,{key:0,index:n.index,class:"menu-item"},{default:e(()=>[t(m,null,{default:e(()=>[(l(),d(V(n.icon)))]),_:2},1024),s("span",null,f(n.title),1)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["default-active"])])])]),_:1},8,["model-value"]),I(t(i,{width:c.isCollapse?"80px":"260px",class:"sidebar"},{default:e(()=>[s("div",pe,[s("div",{class:W(["logo",{collapsed:c.isCollapse}])},[s("div",fe,[t(m,{size:"28"},{default:e(()=>[t(p)]),_:1})]),c.isCollapse?G("",!0):(l(),h("div",ve,[_[2]||(_[2]=s("h2",null,[g(" Murk"),s("span",{style:{color:"#409EFF"}},"PHP"),g("加密系统 ")],-1)),s("div",be,f(c.isAdmin?"管理后台":"用户中心"),1)]))],2),s("div",he,[t(k,{"default-active":x.$route.path,collapse:c.isCollapse,"unique-opened":!0,class:"sidebar-menu",onSelect:B},{default:e(()=>[(l(!0),h(w,null,z(c.menuItems,n=>(l(),h(w,{key:n.index},[n.children?(l(),d(b,{key:1,index:n.index,class:"sub-menu"},{title:e(()=>[t(m,null,{default:e(()=>[(l(),d(V(n.icon)))]),_:2},1024),s("span",null,f(n.title),1)]),default:e(()=>[(l(!0),h(w,null,z(n.children,u=>(l(),d(v,{key:u.index,index:u.index,class:"sub-menu-item"},{default:e(()=>[t(m,null,{default:e(()=>[(l(),d(V(u.icon)))]),_:2},1024),s("span",null,f(u.title),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(l(),d(v,{key:0,index:n.index,class:"menu-item"},{default:e(()=>[t(m,null,{default:e(()=>[(l(),d(V(n.icon)))]),_:2},1024),s("span",null,f(n.title),1)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["default-active","collapse"])])])]),_:1},8,["width"]),[[L,!c.isMobile]])],64)}}},we=q(xe,[["__scopeId","data-v-1dc13499"]]);const ge={class:"header-left"},ye={class:"header-right"},ke={class:"switch-backend"},Ce={class:"user-info"},Me={class:"user-details"},Ve={class:"profile-info"},Ie={__name:"AdminLayout",setup(c){const S=Z(),$=N(),y=P(!1),r=P(!1),M=P(!1),B=[{index:"/admin/dashboard",title:"仪表盘",icon:"House"},{index:"/admin/users",title:"用户管理",icon:"User",children:[{index:"/admin/users",title:"用户列表",icon:"UserFilled"},{index:"/admin/roles",title:"角色管理",icon:"Avatar"},{index:"/admin/recharge",title:"充值记录",icon:"CreditCard"},{index:"/admin/orders",title:"订单管理",icon:"ShoppingCart"}]},{index:"/admin/scripts",title:"脚本系统",icon:"Document",children:[{index:"/admin/scripts",title:"脚本管理",icon:"Document"},{index:"/admin/tokens",title:"Token管理",icon:"Key"},{index:"/admin/api-logs",title:"加密日志",icon:"List"}]},{index:"/admin/settings",title:"网站管理",icon:"Monitor",children:[{index:"/admin/settings",title:"网站设置",icon:"Setting"},{index:"/admin/announcements",title:"公告管理",icon:"Bell"},{index:"/admin/website-logs",title:"网站日志",icon:"Document"}]}],x=U(()=>{var u;const o=S.path,i=(u=S.meta)==null?void 0:u.title;if(!i)return[];const n=[];return o.includes("/admin/users")||o.includes("/admin/roles")||o.includes("/admin/recharge")||o.includes("/admin/orders")?(n.push({path:"/admin/users",title:"用户管理"}),i!=="用户管理"&&n.push({path:o,title:i})):o.includes("/admin/scripts")||o.includes("/admin/tokens")||o.includes("/admin/api-logs")?(n.push({path:"/admin/scripts",title:"脚本系统"}),i!=="脚本系统"&&n.push({path:o,title:i})):o.includes("/admin/settings")||o.includes("/admin/website-logs")?(n.push({path:"/admin/settings",title:"网站管理"}),i!=="网站管理"&&n.push({path:o,title:i})):n.push({path:o,title:i}),n}),_=U(()=>{const o=S.matched.filter(i=>i.meta&&i.meta.title);return o.length>0?o[o.length-1].meta.title:"murkphp加密系统"}),p=()=>{r.value=window.innerWidth<768},m=()=>{r.value?M.value=!M.value:y.value=!y.value},v=()=>{$.push("/user")},b=()=>{$.push("/user/profile")},k=()=>{ee.success("退出登录成功"),$.push("/login")};return X(()=>{p(),window.addEventListener("resize",p)}),Y(()=>{window.removeEventListener("resize",p)}),(o,i)=>{const n=a("el-icon"),u=a("el-button"),E=a("el-breadcrumb-item"),H=a("el-breadcrumb"),K=a("el-tooltip"),F=a("el-avatar"),D=a("el-dropdown-item"),R=a("el-dropdown-menu"),j=a("el-dropdown"),J=a("el-header"),O=a("router-view"),Q=a("el-main"),T=a("el-container");return l(),d(T,{class:"layout-container"},{default:e(()=>[t(we,{"is-collapse":y.value,"is-mobile":r.value,"drawer-visible":M.value,"onUpdate:drawerVisible":i[0]||(i[0]=A=>M.value=A),"is-admin":!0,"menu-items":B},null,8,["is-collapse","is-mobile","drawer-visible"]),t(T,null,{default:e(()=>[t(J,{class:"header"},{default:e(()=>[s("div",ge,[t(u,{type:"text",onClick:m,class:"collapse-btn"},{default:e(()=>[r.value?(l(),d(n,{key:0},{default:e(()=>[t(C(te))]),_:1})):(l(),d(n,{key:1},{default:e(()=>[y.value?(l(),d(C(ne),{key:0})):(l(),d(C(se),{key:1}))]),_:1}))]),_:1}),I(t(H,{separator:"/",class:"breadcrumb"},{default:e(()=>[t(E,{to:{path:"/admin/dashboard"}},{default:e(()=>i[1]||(i[1]=[g("首页",-1)])),_:1,__:[1]}),(l(!0),h(w,null,z(x.value,A=>(l(),d(E,{key:A.path},{default:e(()=>[g(f(A.title),1)]),_:2},1024))),128))]),_:1},512),[[L,!r.value]]),I(s("div",{class:"page-title"},f(_.value),513),[[L,r.value]])]),s("div",ye,[s("div",ke,[t(K,{content:"切换到用户后台",placement:"bottom"},{default:e(()=>[t(u,{type:"text",class:"switch-btn",onClick:v},{default:e(()=>[t(n,null,{default:e(()=>[t(C(le))]),_:1}),I(s("span",null,"切换后台",512),[[L,!r.value]])]),_:1})]),_:1})]),t(j,{class:"user-dropdown",trigger:"click"},{dropdown:e(()=>[t(R,{class:"user-dropdown-menu"},{default:e(()=>[t(D,{class:"user-profile-item"},{default:e(()=>[s("div",Ve,[t(F,{size:40,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}),i[3]||(i[3]=s("div",{class:"profile-details"},[s("div",{class:"profile-name"},"管理员"),s("div",{class:"profile-email"},"admin@example.com")],-1))])]),_:1}),t(D,{divided:"",onClick:b},{default:e(()=>[t(n,null,{default:e(()=>[t(C(ie))]),_:1}),i[4]||(i[4]=g(" 个人中心 ",-1))]),_:1,__:[4]}),t(D,{divided:"",onClick:k,class:"logout-item"},{default:e(()=>[t(n,null,{default:e(()=>[t(C(oe))]),_:1}),i[5]||(i[5]=g(" 退出登录 ",-1))]),_:1,__:[5]})]),_:1})]),default:e(()=>[s("div",Ce,[t(F,{size:36,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",class:"user-avatar"}),I(s("div",Me,i[2]||(i[2]=[s("div",{class:"username"},"管理员",-1),s("div",{class:"user-role"},"超级管理员",-1)]),512),[[L,!r.value]]),I(t(n,{class:"dropdown-icon"},{default:e(()=>[t(C(ae))]),_:1},512),[[L,!r.value]])])]),_:1})])]),_:1}),t(Q,{class:"main-content"},{default:e(()=>[t(O)]),_:1})]),_:1})]),_:1})}}},$e=q(Ie,[["__scopeId","data-v-24fe86d8"]]);export{$e as default};
