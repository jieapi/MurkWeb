import{u as G,r as l,l as H,j as y,b as J,o as u,c as r,d as e,t as d,F as w,h as V,n as g,v as K,x as O,s as W,e as F,p as k,a8 as X,q as I,a9 as n}from"./index-8c5ed3cb.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";const Z={class:"mobile-recharge"},ee={class:"content"},te={class:"balance-card"},ae={class:"balance-left"},se={class:"balance-amount"},le={class:"card amount-card"},ne={class:"amount-grid"},oe=["onClick"],ie={class:"custom-input"},ce={class:"input-wrapper"},de={class:"card payment-card"},ue={class:"payment-list"},re=["onClick"],ve={class:"payment-left"},me={class:"payment-info"},pe={class:"payment-name"},fe={class:"payment-desc"},ge={class:"payment-check"},_e={class:"agreement"},he={class:"agreement-check"},be=["disabled"],ye={class:"modal-footer"},ke={class:"modal-agreement"},xe={class:"modal-buttons"},Ae=["disabled"],Ce={class:"modal-content"},Se={class:"confirm-info"},we={class:"confirm-item"},Ve={class:"highlight"},Fe={class:"confirm-item"},Ie={__name:"Recharge",setup(Pe){const P=G(),M=l("128.50");l("测试用户");const m=l(null),o=l(""),v=l("alipay"),i=l(!1),c=l(!1),p=l(!1),f=l(!1),_=l(!1);H(()=>{localStorage.getItem("rechargeAgreementStatus")==="agreed"&&(i.value=!0)});const B=l([10,20,50,100,200,500]),x=l([{id:"alipay",name:"支付宝",desc:"推荐使用",color:"#1677ff"},{id:"wechat",name:"微信支付",desc:"安全便捷",color:"#07c160"},{id:"qq",name:"QQ钱包",desc:"快速支付",color:"#12b7f5"}]),h=y(()=>o.value&&parseFloat(o.value)>0?parseFloat(o.value).toFixed(2):m.value?m.value.toFixed(2):"0.00"),N=y(()=>{const s=x.value.find(t=>t.id===v.value);return s?s.name:""}),b=y(()=>parseFloat(h.value)>0&&v.value&&i.value),R=s=>{m.value=s,o.value=""},q=()=>{o.value&&(m.value=null)},T=()=>{const s=parseFloat(o.value);s&&s<1?(n.text("最小充值金额为1元"),o.value="1"):s&&s>5e4&&(n.text("最大充值金额为50000元"),o.value="50000")},U=s=>{v.value=s},j=()=>{i.value?(n.text("已同意充值协议"),localStorage.setItem("rechargeAgreementStatus","agreed")):localStorage.removeItem("rechargeAgreementStatus")},z=()=>{c.value=!1,p.value=!0},A=()=>{p.value=!1,c.value=!1},D=()=>{c.value?(i.value=!0,p.value=!1,n.text("已同意充值协议"),localStorage.setItem("rechargeAgreementStatus","agreed"),c.value=!1):n.text("请先勾选同意协议")},Q=()=>{i.value=!1,p.value=!1,n.text("您已拒绝充值协议"),localStorage.removeItem("rechargeAgreementStatus"),c.value=!1},$=()=>{if(!b.value){if(parseFloat(h.value)<=0){n.text("请选择充值金额");return}if(!v.value){n.text("请选择支付方式");return}if(!i.value){n.text("请先同意充值协议");return}}f.value=!0},C=()=>{f.value=!1},E=async()=>{_.value=!0,f.value=!1;try{n.text("正在处理充值..."),await new Promise(s=>setTimeout(s,2e3)),n.text("充值成功！"),setTimeout(()=>{P.push("/user/balance")},1500)}catch{n.text("充值失败，请重试")}finally{_.value=!1}};return(s,t)=>{const S=J("nut-checkbox");return u(),r("div",Z,[e("div",ee,[e("div",te,[e("div",ae,[t[5]||(t[5]=e("div",{class:"balance-label"},"账户余额",-1)),e("div",se,"¥"+d(M.value),1)])]),e("div",le,[t[7]||(t[7]=e("div",{class:"card-header"},[e("i",{class:"nutui-iconfont nutui-icon-wallet"}),e("span",null,"选择充值金额")],-1)),e("div",ne,[(u(!0),r(w,null,V(B.value,a=>(u(),r("div",{key:a,class:g(["amount-item",{active:m.value===a}]),onClick:L=>R(a)}," ¥"+d(a),11,oe))),128))]),e("div",ie,[e("div",ce,[t[6]||(t[6]=e("span",{class:"currency"},"¥",-1)),K(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>o.value=a),type:"number",placeholder:"自定义金额",onInput:q,onBlur:T},null,544),[[O,o.value]])])])]),e("div",de,[t[8]||(t[8]=e("div",{class:"card-header"},[e("i",{class:"nutui-iconfont nutui-icon-credit-card"}),e("span",null,"选择支付方式")],-1)),e("div",ue,[(u(!0),r(w,null,V(x.value,a=>(u(),r("div",{key:a.id,class:g(["payment-item",{active:v.value===a.id}]),onClick:L=>U(a.id)},[e("div",ve,[e("div",{class:"payment-icon",style:W({backgroundColor:a.color})},[e("span",null,d(a.name.charAt(0)),1)],4),e("div",me,[e("div",pe,d(a.name),1),e("div",fe,d(a.desc),1)])]),e("div",ge,[e("i",{class:g(v.value===a.id?"nutui-iconfont nutui-icon-check-checked":"nutui-iconfont nutui-icon-check-normal")},null,2)])],10,re))),128))])]),e("div",_e,[e("div",he,[F(S,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=a=>i.value=a),onClick:j,class:"agreement-checkbox"},null,8,["modelValue"]),t[9]||(t[9]=e("span",null,"我已阅读并同意",-1)),e("span",{class:"agreement-link",onClick:k(z,["stop"])},"《充值协议》")])]),e("button",{class:g(["submit-btn",{disabled:!b.value}]),disabled:!b.value,onClick:$},d(_.value?"处理中...":"立即充值"),11,be)]),p.value?(u(),r("div",{key:0,class:"modal-overlay",onClick:A},[e("div",{class:"modal",onClick:t[3]||(t[3]=k(()=>{},["stop"]))},[e("div",{class:"modal-header"},[t[10]||(t[10]=e("h3",null,"充值协议",-1)),e("i",{class:"nutui-iconfont nutui-icon-close",onClick:A})]),t[12]||(t[12]=X('<div class="modal-content" data-v-8541c9e9><div class="agreement-section" data-v-8541c9e9><h4 data-v-8541c9e9>充值须知</h4><p data-v-8541c9e9><strong data-v-8541c9e9>虚拟商品，不能退款</strong></p><ul data-v-8541c9e9><li data-v-8541c9e9>充值前请确认您的账户信息无误</li><li data-v-8541c9e9>充值金额将实时到账，请耐心等待</li><li data-v-8541c9e9>充值过程中请勿关闭页面或重复操作</li><li data-v-8541c9e9>如遇充值问题，请及时联系客服处理</li></ul></div><div class="agreement-section" data-v-8541c9e9><h4 data-v-8541c9e9>服务条款</h4><ul data-v-8541c9e9><li data-v-8541c9e9>用户充值的余额仅限在本平台使用</li><li data-v-8541c9e9>平台有权对异常充值行为进行审核</li><li data-v-8541c9e9>用户应遵守平台相关使用规定</li></ul></div></div>',1)),e("div",ye,[e("div",ke,[F(S,{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=a=>c.value=a),class:"modal-checkbox"},null,8,["modelValue"]),t[11]||(t[11]=e("span",{class:"modal-agreement-text"},"我已阅读并同意",-1))]),e("div",xe,[e("button",{class:"cancel-btn",onClick:Q}," 拒绝 "),e("button",{class:"agree-btn",onClick:D,disabled:!c.value}," 同意 ",8,Ae)])])])])):I("",!0),f.value?(u(),r("div",{key:1,class:"modal-overlay",onClick:C},[e("div",{class:"modal payment-modal",onClick:t[4]||(t[4]=k(()=>{},["stop"]))},[t[16]||(t[16]=e("div",{class:"modal-header"},[e("h3",null,"确认充值")],-1)),e("div",Ce,[e("div",Se,[e("div",we,[t[13]||(t[13]=e("span",null,"充值金额：",-1)),e("span",Ve,"¥"+d(h.value),1)]),e("div",Fe,[t[14]||(t[14]=e("span",null,"支付方式：",-1)),e("span",null,d(N.value),1)]),t[15]||(t[15]=e("div",{class:"confirm-note"}," 请确认充值信息，点击确认后将跳转到支付页面 ",-1))])]),e("div",{class:"modal-footer"},[e("button",{class:"cancel-btn",onClick:C},"取消"),e("button",{class:"confirm-btn",onClick:E},"确认充值")])])])):I("",!0)])}}},Ne=Y(Ie,[["__scopeId","data-v-8541c9e9"]]);export{Ne as default};
